ros2 topic pub --rate 5 /start_button std_msgs/msg/Int32 "data: 1"

ros2 topic pub --once /forward_distance std_msgs/msg/Float32MultiArray "data: [210.0, 210.0]"

ros2 run micro_ros_agent micro_ros_agent multiserial --devs /dev/ttyACM0 /dev/ttyACM1 /dev/ttyUSB0 --baud 1000000

ros2 topic pub --once /lift_up std_msgs/msg/Int32MultiArray "{data: [1, 10]}" && ros2 topic pub --once /lift_up std_msgs/msg/Int32MultiArray "{data: [3, 10]}"

///////////////////////////// AP 作成　///////////////////////////////////////////
nmcli device wifi hotspot



roslaunch bringup bringup_cartographer.launch

https://github.com/atinfinity/nvidia-egl-desktop-ros2

# source /opt/ros/noetic/setup.bash
# source ~/catkin_ws/devel/setup.bash
source /opt/ros/foxy/setup.bash
source /home/asusros/ros2_ws/install/local_setup.bash

source ~/.bashrc

sudo apt update && sudo apt install curl gnupg2 lsb-release
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key  -o /usr/share/keyrings/ros-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null

sudo apt update
sudo aptitude install ros-foxy-desktop

echo "source /opt/ros/foxy/setup.bash" >> ~/.bashrc
echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc
source ~/.bashrc

sudo apt install python3-colcon-common-extensions
sudo apt install python3-argcomplete

mkdir -p ~/ros2_ws/src
cd ros2_ws/
colcon build

/////////////package install///////////////////////////////////
cd ~/ros2/
rosdep install --from-paths src --ignore-src -r -y
colcon build --symlink-install
colcon build --symlink-install --cmake-args=-DCMAKE_BUILD_TYPE=Release
source ~/ros2_ws/install/setup.bash

colcon build --cmake-target tests

--build-base PATH	パスで指定したディレクトリにCOLCON_IGNOREと.build_byファイルが作成される。なんで。
--install-base PATH	ビルド後にパスで指定したディレクトリにパッケージがインストールされる。
--symlink-install	可能なら、ファイルコピーの代わりにシンボリックリンクを使用してインストールする。
colcon build --continue-on-error	パッケージのビルド失敗時に、他のパッケージのビルドを続行する。
--executor (parallel or sequential)	複数パッケージを並行してビルドするか、1個ずつビルドするかを指定できる。
--parallel-workers NUMBER	並行してビルドするパッケージ数を指定する。デフォルトは4。
--base-paths PATH	パスで指定したディレクトリ配下のパッケージを再帰的にビルドする。
--packages-up-to PKGNAME	指定したパッケージと依存パッケージをビルドする。
colcon build --packages-select PKGNAME	指定したパッケージをビルドする。
--packages-select-by-dep	指定したパッケージと指定したパッケージに依存しているパッケージをビルドする。
colcon build --packages-skip-build-finished	ビルドが完了しているパッケージのビルドをスキップする。
--event-handlers ARG	ビルド時の設定。標準出力・ログの指定ができる。

colcon build --cmake-clean-cache
colcon build --packages-select ~~~
colcon build --allow-overriding nav2_common nav2_core nav2_costmap_2d nav2_msgs nav2_util urdf_tutorial
rm -r build install log クリーン

///////////////////////////////////////////////////////////////////////////////////
ros2 launch bringup bringup_ps5_localization_launch.py use_localization:=true map_yaml_file:=/home/jetros/ros2_ws/src/bringup/maps/map20251011-2.yaml use_sim_time:=false
ros2 run nav2_map_server map_server --ros-args -p yaml_filename:=/home/jetros/ros2_ws/src/bringup/maps/map20251011-2.yaml

ros2 launch bringup bringup_ps5_all_launch.py use_localization:=true map_yaml_file:=/home/jetros/ros2_ws/src/bringup/maps/map20251011-2.yaml use_sim_time:=false

ros2 launch bringup bringup_rviz.launch.py
ros2 launch orange_sensor_tools laserscan_multi_merger.launch.xml
ros2 launch slam_toolbox online_async_launch.py use_sim_time:=false
ros2 launch nav2_bringup navigation_launch.py use_sim_time:=false 

ros2 run nav2_map_server map_saver_cli -f ~/map20240319
ros2 run nav2_map_server map_saver_cli -f ~/map20251102 --ros-args -r map:=/nvblox_node/static_occupancy_grid
ros2 run nav2_map_server map_saver_cli -f ~/map20251102 \
  --ros-args \
  -r map:=/global_costmap/costmap


ros2 launch nav2_bringup bringup_launch.py map:=home/asusros/ros2_ws/src/navigation2/nav2_bringup/map/map20240318-1.yaml use_sim_time:=false
ros2 launch emcl2 emcl2.launch.py map:=home/asusros/ros2_ws/src/navigation2/nav2_bringup/map/map20240318-1.yaml
/////////////パッケージ生成  ////////////////////////////////////////////////////////
cd /ros2_ws/srcclimb_complere

ros2 pkg create my_robot_control_cpp --build-type ament_cmake --dependencies rclcpp sensor_msgs geometry_msgs
ros2 pkg create mark3_urdf --build-type ament_cmake --dependencies rclcpp std_msgs 
ros2 pkg create bringup --build-type ament_cmake --dependencies rclcpp std_msgs 
ros2 pkg create zed_object_plotter --build-type ament_cmake --dependencies rclcpp std_msgs zed_interfaces geometry_msgs nav2_msgs tf actionlib actionlib_msgs 
ros2 pkg create cmd_vel_float_changer --build-type ament_cmake --dependencies rclcpp std_msgs sensor_msgs geometry_msgs

ros2 pkg create zed_goal_publisher --build-type ament_cmake --dependencies rclcpp std_msgs zed_interfaces geometry_msgs nav2_msgs tf2 tf2_ros tf2_geometry_msgs sensor_msgs actionlib actionlib_msgs
ros2 pkg create lidar_scan_merger --build-type ament_cmake --dependencies rclcpp std_msgs sensor_msgs
ros2 pkg create status_to_voice --build-type ament_cmake --dependencies rclcpp std_msgs zed_interfaces geometry_msgs nav2_msgs sensor_msgs voicevox_ros2_interface

////////////////////////////////  bringup  ////////////////////////////////////////////////////
ros2 launch nav2_bringup bringup_launch.py slam:=True use_simulator:=False

ros2 launch slam_toolbox online_async_launch.py
ros2 run nav2_map_server map_saver_cli -f ~/map20240318-1

ros2 launch emcl2 emcl2.launch.py use_sim_time:=False map:=/home/asusros/ros2_ws/src/navigation2/nav2_bringup/maps/map20240319-3.yaml
ros2 launch nav2_bringup localization_launch.py use_sim_time:=False map:=/home/asusros/map20240318-1.yaml
ros2 launch nav2_bringup bringup_launch.py use_sim_time:=False map:=/home/asusros/map20240318-1.yaml

ros2 launch nav2_bringup navigation_launch.py use_sim_time:=false 

ros2 launch nav2_bringup bringup_emcl_launch.py use_sim_time:=False map:=/home/asusros/map20240319-3.yaml
ros2 launch nav2_bringup bringup_emcl_launch.py use_sim_time:=False map:=/home/asusros/ros2_ws/src/navigation2/nav2_bringup/maps/map20240319-3.yaml

ros2 run voicevox_ros2 voicevox_ros2_core

ros2 launch realsense2_camera rs_launch.py depth_module.depth_profile:=1280x720x30 micropointcloud.enable:=true

///////////// docker run ros2 humble ///////////////////////////////////
sudo docker run -it 7d47ab63b685
sudo docker stop 7d47ab63b685
/////////////joy teleop///////////////////////////////////
ros2 launch teleop_twist_joy teleop-launch.py joy_config:='ps4'
ros2 run teleop_twist_joy teleop_node 

//////////rqt  ///////////////////////////////////////
ros2 run rqt_gui rqt_gui
ros2 run tf2_tools view_frames
ros2 run tf2_ros tf2_monitor 

////////// ZED2  ///////////////////////////////////////
ros2 launch zed_wrapper zed_camera.launch.py camera_model:='zed2'

ros2 launch zed_display_rviz2 display_zed_cam.launch.py camera_model:='zed2'


ros2 run zed_topic_benchmark zed_topic_benchmark --ros-args -p topic_name:=/zed/zed_node/rgb/image_rect_color:


ros2 run depthimage_to_laserscan depthimage_to_laserscan_node --ros-args -r /depth:=/zed2i/zed_node/depth/depth_registered 
-r /depth_camera_info:=/zed2i/zed_node/depth/camera_info -p output_frame:="zed2i_left_camera_optical_frame"

///////// rtabmap ///////////////////////////////////////////////////////////
ros2 launch rtabmap_launch rtabmap.launch.py \
    rtabmap_args:="--delete_db_on_start" \
    rgb_topic:=/zed/zed_node/rgb/image_rect_color \
    depth_topic:=/zed/zed_node/depth/depth_registered \
    camera_info_topic:=/zed/zed_node/rgb/camera_info \
    frame_id:=zed_camera_link \
    approx_sync:=false \
    wait_imu_to_init:=true \
    imu_topic:=/zed/zed_node/imu/data \
    qos:=1 \
    rviz:=true

////////// USB camera起動  ///////////////////////////////////////
ros2 run v4l2_camera v4l2_camera_node --ros-args -p video_device:=/dev/video0

////////// LD06 LiDAR 起動  ///////////////////////////////////////
ros2 launch ldlidar ldlidar.launch.py



////////// Realsense D435 起動  ///////////////////////////////////////
https://dev.intelrealsense.com/docs/ros-wrapper

ros2 launch realsense2_camera rs_launch.py

ros2 run realsense2_camera realsense2_camera_node --ros-args -p align_depth.enable:=true

ros2 run realsense2_camera realsense2_camera_node --ros-args -p enable_color:=false -p spatial_filter.enable:=true -p temporal_filter.enable:=true


////////////Realsense T265が動くインストール////////////////////////////////////////////////////////
apt-cache policy librealsense2-dkms     #←Version確認

sudo apt-get install librealsense2=2.53.1-0~realsense0.8251
sudo apt-get install librealsense2-gl=2.53.1-0~realsense0.8251
sudo apt-get install librealsense2-net=2.53.1-0~realsense0.8251

sudo apt-get install librealsense2-dkms=1.3.22-0ubuntu1
sudo apt install librealsense2-utils=2.53.1-0~realsense0.8251

↑これ以上上げるとSDKのReleaseNoteでremove対象となっている
////////// Realsense T265 起動  ///////////////////////////////////////
ros2 run realsense2_camera realsense2_camera_node --ros-args -p enable_pose:=true -p device_type:=t265
ros2 launch realsense2_camera rs_d400_and_t265_launch.py enable_fisheye12:=true enable_fisheye22:=true

////////// micro ROS 起動  ///////////////////////////////////////
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyACM0 --baud 1000000
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyACM0 --baud 115200
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyUSB0 --baud 115200
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyUSB0 

ros2 run micro_ros_agent micro_ros_agent multiserial --devs /dev/ttyACM0 /dev/ttyACM1 /dev/ttyUSB0 --baud 1000000

docker run -it --rm -v /dev:/dev --privileged --net=host microros/micro-ros-agent:foxy serial --dev /dev/ttyACM0 -v6

source /opt/ros/foxy/setup.bash 
ros2 topic list


echo "export PICO_SDK_PATH=$HOME/ros2_ws/src/pico-sdk" >> ~/.bashrc

////////// CUDA  ///////////////////////////////////////
1.power management setting
2.Dont softoware update
3.look following below
  https://developer.nvidia.com/cuda-toolkit-archive

edit bashrc
export PATH="/usr/local/cuda/bin:$PATH"
export LD_LIBRARY_PATH="/usr/local/cuda/lib64:$LD_LIBRARY_PATH"


////////// CuDNN  ///////////////////////////////////////

////////// VPI install  ///////////////////////////////////////
https://docs.nvidia.com/vpi/installation.html

////////// ZED2  ///////////////////////////////////////
ros2 launch zed_wrapper zed2.launch.py

////////// Husky gazebo  ///////////////////////////////////////
ros2 launch husky_gazebo husky_playpen.launch.py 


/////////////////   remap   ///////////////////////////////////////
ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args --remap cmd_vel:=/turtle1/cmd_vel
ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args --remap cmd_vel:=/map/cmd_vel

//////////////////  micro-ros /////////////////////////////////////////////////////
以下のgithub　URLサイトでfoxy branchをgit cloneする
https://github.com/micro-ROS/micro_ros_arduino

Teensyduinoでmicro-ROSをコンパイルできるようにするため,
更に~/arduino-1.8.19/hardware/teensy/avrにあるplatform.txtを以下の内容に置き換える。
https://raw.githubusercontent.com/micro-ROS/micro_ros_arduino/main/extras/patching_boards/platform_teensy.txt

これはhttps://github.com/micro-ROS/micro_ros_arduinoの中に書いてある


ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyACM0
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyACM0 -b 115200 -v 6
ros2 run micro_ros_agent micro_ros_agent multiserial --devs /dev/ttyACM0 /dev/ttyACM1 /dev/ttyUSB0 --baud 1000000
/////////////////////////////  ceres install    ///////////////////////////////////////////////////////////////////////////////////////////////
sudo apt-get install libmetis-dev

////////////////////////// velodyne install  /////////////////////////////////////////////////////////////////////////////////
sudo apt install ros-foxy-velodyne* 


//////////////////////// rviz2 errorの場合　///////////////////////////////////////////////////////////////////
Stereo is NOT SUPPORTED

export LIBGL_ALWAYS_SOFTWARE=1
rosrun rviz rviz

または、

export OGRE_RTT_MODE=Copy
rosrun rviz rviz

///////////////////// turtlebot3 simulation //////////////////////////////////////
https://navigation.ros.org/getting_started/index.html

source /opt/ros/foxy/setup.bash
export TURTLEBOT3_MODEL=waffle
export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:/opt/ros/foxy/share/turtlebot3_gazebo/models

ros2 launch nav2_bringup tb3_simulation_launch.py headless:=False

/////////////// map_saver ///////////////////////////////////////////////////////////////////////////////////
ros2 run nav2_map_server map_saver_cli -f ~/map

//////////////////////////////slam_toolboxをvelodyneで動かす場合/////////////////////////////////////////////////////////////////////////
velodyneのpointcloud2をLiDARのscanデータに変換する際、実機ではangle_inrementの値が微妙に
異なっており、配列数よりも1点多く出力されている模様。これに対してslam_toolboxではこれがエラーとなって動かなくなるため、
以下にあるissueよりKarto.hの内容を修正する。

 m_NumberOfRangeReadings = static_cast<kt_int32u>(math::Round((GetMaximumAngle() -
      GetMinimumAngle()) /
      GetAngularResolution() -0.5) + residual);

https://github.com/SteveMacenski/slam_toolbox/issues/426?fbclid=IwAR3BZLm6dyefvmZh9oSkpHzOearRoAOPFTQsKMCsH--tCWk7KAgSB0ibZj8_aem_ASF0GX7rt8605W6DwopDm9UrO5bXDpE3YzUwxMDp2b2EKhiuqXN5RXvdZZcSn_uh6_hT34T4glqrsPmCJh1hLYym




